<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>chow_on_mkelem - ClearCase trigger</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<ul>

		<li><a href="#restrictions">Restrictions</a></li>
	</ul>

	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#bugs">BUGS</a></li>
	<li><a href="#copyright">COPYRIGHT</a></li>
	<li><a href="#test_cases">Test Cases</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<hr />
<h1><a name="name">NAME</a></h1>
<p>chow_on_mkelem - ClearCase trigger</p>
<p>Script:        <em class="file">chow_on_mkelem.pl</em></p>
<p>Trigger name:  <code>CHOW_ON_MKELEM</code></p>
<p>Version (v1.1.3)</p>
<p>Used as a trigger to change the ownership of newly added elemetns to be owned by the VOB owner.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>Runs as ClearCase trigger script installed on basevobs and ucmvobs (not adminvobs or pvobs)</p>
<p>The scripts installs itself correctly when executed outside a trigger context using:</p>
<pre>
  chow_on_mkelem.pl -install -vob \thevob</pre>
<p>To learn the full syntax simply execute the the script without the -vob switch:</p>
<pre>
  chow_on_mkelem.pl -install</pre>
<p>
</p>
<h2><a name="restrictions">Restrictions</a></h2>
<p>During the install process, that script is supposed to run under the account which owns the VOB.
The script will fail if that is not the case.</p>
<p>An exception is if you execute it in -preview mode</p>
<p>To bypass the script you must create the appropriate semaphor file first
(see the POD documentation for praqma::trigger_helper-&gt;enable_semaphore_backdoor).</p>
<p>It goes without saying, that to avoid misuse of this ability ClearCase administrators should make sure
that triggers are executed - and semaphore files ar looked-up - at locations where common users only
have read access. ...There! I said it anyway!</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Elements are per default owned by the user who creates them (adds them to source control) and element ownership
means 'superpowers' ...superpowers which general users aren't supposed to have, so thererfor they are revoked
instantly upon creation by this trigger.</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Lars Kruse, &lt;<a href="mailto:lak@praqma.net">lak@praqma.net</a>&gt;.</p>
<p>
</p>
<hr />
<h1><a name="bugs">BUGS</a></h1>
<p>See the website below.</p>
<p>
</p>
<hr />
<h1><a name="copyright">COPYRIGHT</a></h1>
<p>This program is distributed under the GNU General Pulic License v3.0</p>
<p>Support:    <a href="http://launchpad.net/acc">http://launchpad.net/acc</a></p>
<a href="http://launchpad.net/acc">Project home at Launchpad</a><p>
</p>
<hr />
<h1><a name="test_cases">Test Cases</a></h1>
<dl>
<dt><strong><a name="test_1" class="item">Test 1:</a></strong></dt>

<dd>
</li>
<li><strong><a name="test_what_usage_information_to_stdout_if_no_trigger_context" class="item">Test what: Usage information to STDOUT if no trigger context</a></strong>

</li>
<li><strong><a name="test_how_ratlperl_chow_on_mkelem_pl" class="item">Test how: ratlperl chow_on_mkelem.pl</a></strong>

</li>
<li><strong><a name="expect_usage_information_printed_to_stdout" class="item">Expect: Usage information printed to STDOUT</a></strong>

</dd>
</dl>
<dl>
<dt><strong><a name="test_2" class="item">Test 2:</a></strong></dt>

<dd>
</li>
<li><strong><a name="test_what_trigger_is_self_installing_on_the_allowed_vob_types" class="item">Test what: Trigger is self-installing on the allowed vob types</a></strong>

</li>
<li><strong><a name="test_how_ratlperl_uncpath_chow_on_mkelem_install_vob_vobtag" class="item">Test how: ratlperl &lt;UNCPATH&gt;\chow_on_mkelem -install -vob <em>vobtag</em></a></strong>

</li>
<li><strong><a name="expect_shall_install_if_vob_type_is_either_bccvob_or_ucmvob_see_enable_install_in_pragma_trigger_helper_pm_if_the_vob_type_is_not_allowed_the_script_shall_refuse_to_install_on_the_vob" class="item">Expect: shall install if vob type is either <em>bccvob</em> or <em>ucmvob</em> see &quot;enable_install&quot;
in ..\Pragma\trigger_helper.pm, if the vob type is not allowed, the script shall refuse to
install on the vob.</a></strong>

</dd>
</dl>
<dl>
<dt><strong><a name="test_3" class="item">Test 3:</a></strong></dt>

<dd>
</li>
<li><strong><a name="test_what_logging_can_be_enabled" class="item">Test what: Logging can be enabled</a></strong>

</li>
<li><strong><a name="test_how_install_trigger_then_set_environment_variable_clearcase_trigger_debug_1_and_add_a_new_element_to_the_vob" class="item">Test how: Install trigger, then set environment variable CLEARCASE_TRIGGER_DEBUG=1, and add a new element to the vob</a></strong>

</li>
<li><strong><a name="expect_a_log_file_shall_be_created_in_temp_look_for_a_file_called_chow_on_mkelem_pl_pid_n_log" class="item">Expect: A log file shall be created in TEMP, look for a file called chow_on_mkelem.pl.PID&lt;N&gt;.log</a></strong>

</dd>
</dl>
<dl>
<dt><strong><a name="test_4" class="item">Test 4:</a></strong></dt>

<dd>
</li>
<li><strong><a name="bypassed" class="item">Test what: Trigger can be bypassed (Not too important here, this one is a post-op trigger, and can there for not prevent an operation.</a></strong>

</li>
<li><strong><a name="test_how_create_a_valid_semaphore_file_and_add_an_element_to_source_control_from_command_line" class="item">Test how: Create a valid semaphore file, and add an element to source control from command line.</a></strong>

</li>
<li><strong><a name="expect_a_message_is_printed_to_stdout_that_tells_that_the_script_was_cancelled" class="item">Expect: A message is printed to STDOUT that tells that the script was cancelled.</a></strong>

</dd>
</dl>
<dl>
<dt><strong><a name="test_5" class="item">Test 5:</a></strong></dt>

<dd>
</li>
<li><strong><a name="test_what_element_owner_is_set_to_vobowner" class="item">Test what: Element owner is set to vobowner.</a></strong>

</li>
<li><strong><a name="test_how_first_take_a_note_of_the_vob_owner_by_executing_cleartool_desc_fmt_owner_p_vob_vobtag_then_add_a_new_element_to_the_vob_as_a_user_that_is_not_the_vob_owner" class="item">Test how: First take a note of the vob-owner by executing:
 cleartool desc -fmt %[owner]p vob:\<em>vobtag</em>
then add a new element to the vob as a user that is not the vob-owner</a></strong>

</li>
<li><strong><a name="expect_the_owner_of_the_element_shall_be_the_vob_owner_when_the_operation_completes" class="item">Expect: The owner of the element shall be the vob-owner when the operation completes.</a></strong>

</dd>
</dl>
<dl>
<dt><strong><a name="test_6" class="item">Test 6:</a></strong></dt>

<dd>
</li>
<li><strong><a name="test_what_the_owner_is_not_changed_when_trigger_bypassing_is_active" class="item">Test what: The owner is not changed when trigger bypassing is active</a></strong>

</li>
<li><strong><a name="test_how_do_test_4_then_test_5" class="item">Test how: Do test 4, then test 5</a></strong>

</li>
<li><strong><a name="expect_the_owner_of_the_new_element_shall_not_be_changed_but_stay_with_the_user_that_added_the_element" class="item">Expect: The owner of the new element shall not be changed, but stay with the user that added the element.</a></strong>

</dd>
</dl>

</body>

</html>
